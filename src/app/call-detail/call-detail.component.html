<div class="main-content">
  <div class="container-fluid">
    <div class="row">

      <nav class="navbar" ng-show="showmyjoblist">
        <div class="container-fluid">
          <div class="navbar-header">
            <div class="row" id="calldetail">
              <div class="col-md-6">
                <div class="input-group" style="margin-top: 9px;">
                  <div class="input-group-btn  btn-raised search-panel">
                    <button type="button" class="btn  btn-raised btn-default dropdown-toggle" data-toggle="dropdown">
                      <span id="search_concept">Search by {{displaydd}}</span>
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li>
                        <button class="btn  btn-raised btn-info btn-block btn-sm"
                          (click)="filterdropdownfunction('my_candidates', 'My Candidates')">My Candidates</button>
                      </li>

                      <li>
                        <button class="btn  btn-raised btn-success btn-block btn-sm"
                          (click)="filterdropdownfunction('jobs', 'Jobs')">Jobs</button>
                      </li>

                    </ul>
                  </div>

                  <input type="text" class="form-control" ng-auto-complete callback-fn='jobnamesuggest()'
                    id='jobssearch' [(ngModel)]="searchcandidatetext" (change)="filteragain()"
                    placeholder="Search Jobs">
                  <input type="text" style="display: none;" class="form-control" id='candidatessearch'
                    [(ngModel)]="searchcandidate" (change)="filterbycandidate()" placeholder="Search Candidates">

                  <span class="input-group-btn">
                    <button class="btn  btn-raised btn-default" (click)="filterbyJob()" type="button">
                      Go
                    </button>
                  </span>
                </div>

              </div>
              <div class="col-md-2">


                <mat-form-field>
                  <input matInput [(ngModel)]="item.start_date_temp" [matDatepicker]="picker"
                    placeholder="Choose a date" class="e">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>


              </div>

              <div class="col-md-2">

                <mat-form-field>
                  <input matInput [(ngModel)]="item.end_date_temp" [matDatepicker]="picker2" placeholder="Choose a date"
                    class="e">
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>


              </div>



              <button type="button" class="btn  btn-raised  btn-success " (click)="getlist();"
                style="margin-top: 9px;">Submit</button>
            </div>


          </div>
        </div>
      </nav>


      <!-- Assist content -->


      <div style="margin-top:20px;" class="col-md-12">


        <ul class="nav nav-tabs showloader pull-left  ">
          <li class="active"><a href="#" data-toggle="tab" (click)='changefilter("hascall","hascall")'
              class="btn  btn-raised btn-primary">Call>0</a></li>
          <li><a href="#" data-toggle="tab" (click)='changefilter("Hold","job_status")'
              class="btn  btn-raised btn-primary">Hold</a></li>
          <li><a href="#" data-toggle="tab" (click)='changefilter(1,"website")'
              class="btn  btn-raised btn-primary">Visible on Website</a></li>
          <li><a href="#" data-toggle="tab" (click)='changefilter("Closed","job_status")'
              class="btn  btn-raised btn-primary">Closed</a></li>
          <li><a href="#" data-toggle="tab" style="background:#ddf295; color:#251e22;"
              (click)='changefilter("Interview","interview")' class="btn  btn-raised btn-primary">Interview</a></li>

          <li><a href="#" data-toggle="tab" (click)='changefilter("All","job_status")'
              class="btn  btn-raised btn-primary">All</a></li>
          <li><a href="#" data-toggle="tab" (click)='changefilter("Tagged","tagged")'
              class="btn  btn-raised btn-primary">Tagged</a></li>

        </ul>

        <pagination-controls ngDefaultControl directionLinks="true" autoHide="true" responsive="true" previousLabel="Previous"
          nextLabel="Next" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
          screenReaderCurrentLabel="You're on page" class="pull-right my-pagination" (pageChange)="p = $event">
        </pagination-controls>

        <div class="clearfix"></div>

        <div class="box box-primary" id="#">
          <mat-progress-bar mode="indeterminate" *ngIf="isLoadingJobs"></mat-progress-bar>

          <div class="row">

            <div class="col-md-12">
              <div class="card" (click)="selectdeselect($event,item)"
                *ngFor="let item of jobslist | orderBy:'visibleonwebsite' | paginate: { itemsPerPage: 10, currentPage: p };  let i = index">
                <div class="card-header card-header-{{item.selected?'success':'info'}}">
                  <h4 class="card-title">
                    <!-- {{i}}  -->
                    <a class="title_in" target="_blank" href="/#/myjob/{{item.id}}"
                      ___stopclick="showJob(item.id, $event)">

                      <span itemprop="title" class="title_in" style="margin-right:2px;">

                        <span class="hightlighted_keyword"> {{item.job_title}} </span>

                      </span>
                    </a> </h4>
                  <p class="card-category">
                    <span>( Job ID : {{item.category_code}}{{item.id}} )</span>

                    <span itemtype="#" help='Client'>{{item.ClientName}} </span>

                    <span style='padding-left:10px; display:inline-block;'>
                      <i class='fa fa-inr'></i> {{item.referralBonus}} </span> <span
                      ng-hide='mp.btn_approve_job_by_manager || item.is_approved_by_manager=="0"'
                      class="selectapproved{{item.is_approved_by_manager}}" help="Approved by manager">
                      <i class="fa fa-check"></i>
                    </span></p>
                </div>
                <div class="card-body table-responsive">
                  <div class="member-social pull-right col-md-6 shareparent" style="text-align: right;">


                    <a mat-mini-fab class="" help="Assign to recruiter" href="javascript:" (click)="assignjobClick()">
                      <i class="fa fa-share-square-o"></i>
                    </a>
                    <!--<a   ng-show='mp.btn_approve_job_by_manager' class="select{{item.is_approved_by_manager}}" help="approved" href="javascript:"-->

                    <a mat-mini-fab ng-show='mp.btn_approve_job_by_manager' title="Approve by Manager"
                      href="javascript:" (click)="is_approved_by_manager(item)">
                      <i class="fa fa-check"></i>
                    </a>

                    <a mat-mini-fab title="Tag" href="javascript:" (click)="tag(item)">
                      <i class="fa fa-tags"></i>
                    </a>
                    <a mat-mini-fab class="" help="Show JD" href="javascript:" style='color:black; background:#ffffbe;'
                      (click)="item.responsibilityshow=!item.responsibilityshow;">
                      <i class="fa fa-bolt "></i>
                    </a>
                    <a mat-mini-fab ng-show='item.visibleonwebsite==1' class=""
                      href="{{$url}}/{{item.slug}}/{{item.id}}/{{profile.id}}" target="_blank"
                      style='color:red; background:white;' help='Visible on Website'>
                      <i class="fa fa-eye "></i>
                    </a>

                    <!-- <a mat-mini-fab class="facebook" ng-hide="profile.isvendor=='1'"
                                          href="https://www.facebook.com/sharer/sharer.php?u={{$url}}{{item.slug}}/{{item.id}}/{{profile.id}}&text={{item.job_title}}"
                                          target="_blank">
                                          <i class="fa fa-facebook "></i>
                                        </a> -->

                    <!-- <a mat-mini-fab class="twitter" ng-hide="profile.isvendor=='1'"
                                          href="https://twitter.com/share?url={{$url}}{{item.slug}}/{{item.id}}/{{profile.id}}&text={{item.job_title}}"
                                          target="_blank">
                                          <i class="fa fa-twitter  "></i>
                                        </a> -->

                    <!-- <a mat-mini-fab class="linkedin" ng-hide="profile.isvendor=='1'"
                                          href="https://www.linkedin.com/shareArticle?mini=true&url={{$url}}{{item.slug}}/{{item.id}}/{{profile.id}}&title={{item.job_title}}&summary={{item.job_title}}&source=sadf"
                                          target="_blank">
                                          <i class="fa fa-linkedin "></i>
                                        </a> -->
                    <a mat-mini-fab data-toggle="modal" *ngIf="db.mp.btn_take_internal_refeference"
                      data-target="#internalreference" href="javascript:"
                      (click)="GetInHourseReference(item.id, $event)" class="text-danger" help='get reference internal'
                      title='get reference internal'>
                      <i class="fa fa-bullhorn  " style="color:white;"></i>
                    </a>
                    <!-- <a mat-mini-fab href="#" class="pull-right text-aqua" *ngIf="db.mp.btn_upload_cv_myjobs">
                                          <i data-toggle="tooltip" ngf-select="uploadinvoicevendor($file,11)" help="Upload CVs(Excel)"
                                            class="fa fa-upload"></i>
                                        </a> -->

                    <!-- <div class="sharediv">
                                          Share for Apply : <a mat-mini-fab class="facebook" ng-hide="profile.isvendor=='1'"
                                            href="https://www.facebook.com/sharer/sharer.php?u={{$urlapply}}{{item.slug}}/{{item.id}}/00&text={{item.job_title}}"
                                            target="_blank">
                                            <i class="fa fa-facebook "></i>
                                          </a> -->

                    <!-- <a class="twitter" mat-mini-fab ng-hide="profile.isvendor=='1'"
                                            href="https://twitter.com/share?url={{$urlapply}}{{item.slug}}/{{item.id}}/00&text={{item.job_title}}"
                                            target="_blank">
                                            <i class="fa fa-twitter  "></i>
                                          </a> -->

                    <!-- <a class="linkedin" mat-mini-fab ng-hide="profile.isvendor=='1'"
                                            href="https://www.linkedin.com/shareArticle?mini=true&url={{$urlapply}}{{item.slug}}/{{item.id}}/00&title={{item.job_title}}&summary={{item.job_title}}&source=sadf"
                                            target="_blank">
                                            <i class="fa fa-linkedin "></i>
                                          </a>

                                      </div>-->
                                        </div>

                                      <div class="col-md-12">
                                        <div class='row buttonwithnumber'>

                                            <button mat-raised-button color="primary" matBadge="{{item.allcandidate}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'all', item)" data-toggle="modal"
                                            data-target="#candidatesall">All
                                          </button>

                                            <button mat-raised-button color="primary" matBadge="{{item.calledinterested}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'calledinterested', item)" data-toggle="modal"
                                            data-target="#candidatesall">Interested
                                          </button>

                                            <button mat-raised-button color="primary" matBadge="{{item.callednotinterested}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'callednotinterested', item)" data-toggle="modal"
                                            data-target="#candidatesall">Not interested
                                          </button>

                                            <button mat-raised-button color="primary" matBadge="{{item.callbackrequest}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'callbackrequest', item)" data-toggle="modal"
                                            data-target="#candidatesall">Call Back Request
                                          </button>

                                            <button mat-raised-button color="primary" matBadge="{{item.tocall}}/{{item.incompletecall}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'incompletecall', item)" data-toggle="modal"
                                            data-target="#candidatesall">To call/No status
                                          </button>

                                            <button mat-raised-button color="primary" matBadge="{{item.couldnotconnect}}"
                                            matBadgePosition="after" matBadgeColor="accent" class=" "
                                            (click)="filterdrbytab('My Candidates', 'couldnotconnect', item)" data-toggle="modal"
                                            data-target="#candidatesall">Could Not Connect
                                          </button>
                                        </div>

                                      </div>
                                      <div class="col-md-12" [hidden]="!item.responsibilityshow">
                                        <p class="htmlele">{{item.jobDescription}}</p>
                                      </div>

                                    </div>
                                  </div>
                                </div>
                              </div>

                              <pagination-controls     directionLinks="true"
                              autoHide="true"
                              responsive="true"
                              previousLabel="Previous"
                              nextLabel="Next"
                              screenReaderPaginationLabel="Pagination"
                              screenReaderPageLabel="page"
                              screenReaderCurrentLabel="You're on page" class="pull-right my-pagination" (pageChange)="p = $event"></pagination-controls>
                          <mat-card [hidden]='jobslist.length>0||isLoadingJobs' >
                              No Data Found
                          </mat-card>

                      </div>

                      <div class="clearfix"></div>

                  </div>

                  <div class="col-md-12">
                    <div class='row buttonwithnumber'>

                      <button mat-raised-button color="primary" matBadge="{{item.allcandidate}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'allcalled', item)" data-toggle="modal"
                        data-target="#candidatesall">All
                      </button>

                      <button mat-raised-button color="primary" matBadge="{{item.calledinterested}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'calledinterested', item)" data-toggle="modal"
                        data-target="#candidatesall">Interested
                      </button>

                      <button mat-raised-button color="primary" matBadge="{{item.callednotinterested}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'callednotinterested', item)" data-toggle="modal"
                        data-target="#candidatesall">Not interested
                      </button>

                      <button mat-raised-button color="primary" matBadge="{{item.callbackrequest}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'callbackrequest', item)" data-toggle="modal"
                        data-target="#candidatesall">Call Back Request
                      </button>

                      <button mat-raised-button color="primary" matBadge="{{item.tocall}}/{{item.incompletecall}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'incompletecall', item)" data-toggle="modal"
                        data-target="#candidatesall">To call/No status
                      </button>

                      <button mat-raised-button color="primary" matBadge="{{item.couldnotconnect}}"
                        matBadgePosition="after" matBadgeColor="accent" class=" "
                        (click)="filterdrbytab('My Candidates', 'couldnotconnect', item)" data-toggle="modal"
                        data-target="#candidatesall">Could Not Connect
                      </button>
                    </div>

                  </div>
                  <div class="col-md-12" [hidden]="!item.responsibilityshow">
                    <p class="htmlele">{{item.jobDescription}}</p>
                  </div>

                </div>
              </div>
            </div>
          </div>


          <mat-card [hidden]='jobslist.length>0||isLoadingJobs'>
            No Data Found
          </mat-card>

        </div>

        <div class="clearfix"></div>

      </div>



      <div class="modal fade" id="candidatesall" role="dialog">
        <div class="modal-dialog modal-lg">



          <div class="modal-content">
            <div class="modal-header">


              <h4 class="modal-title">{{gridheader}} <i class='h5'>( {{jobitemselected.ClientName}} >
                  {{jobitemselected.location}} > {{jobitemselected.job_title}})</i></h4>

              <button type="button" class="close" data-dismiss="modal">&times;</button>


              <!--<div class='col-md-2'>-->

              <!--</div>-->








            </div>
            <div class="modal-body">
              <div class="col-md-12 callbutton">
                <a href="javascript:" title='call' data-target='#calldiv' data-toggle='modal' ng-if="mp.btn_can_call"
                  mat-fab><i class="fa fa-phone"></i></a>



                <a ng-if="mp.candidates_under_job_copyjob" class="btn btn-raised btn-sm" href="javascript:"
                  data-toggle="modal" data-target="#addtojob">
                  <span class="glyphicon glyphicon-log-in" style="color:#0c0c0c;"></span> Assign Candidate</a>

                <!-- <a ng-if="mp.btn_submit_cv_to_panel" class="btn btn-raised btn-sm" href="javascript:"
                                  (click)="submit_cv_to_panel_status()">
                                  <span class="glyphicon glyphicon-log-in" style="color:#0c0c0c;"></span> Submit to Panel</a>

                                <a href="javascript:" (click)="submitcv()" class="btn btn-raised btn-sm">
                                  <span class="glyphicon glyphicon-log-in" style="color:#0c0c0c;"></span> Submit Cv</a> -->
              </div>
              <div>
                <!-- <button type="button" class="btn  btn-raised btnnew btn-xs  "  style="width:10%;" (click)="filterdrbytab('My Candidates', 'allcalled')"
                                                      data-target="#candidatesall">All
                                                  <span class="badge ng-binding">{{allcalledcandidate}}</span>
                                              </button>
                                              <button type="button" class="btn  btn-raised btnnew1 btn-xs " (click)="filterdrbytab('My Candidates', 'calledinterested')"
                                                      data-target="#candidatesall">Interested
                                                  <span class="badge ng-binding">{{calledinterested}}</span>
                                              </button>
                                              <button type="button" class="btn  btn-raised btnnew2 btn-xs " (click)="filterdrbytab('My Candidates', 'callednotinterested')"
                                                      data-target="#candidatesall">Not interested
                                                  <span class="badge ng-binding">{{callednotinterested}}</span>
                                              </button>
                                              <button type="button" class="btn  btn-raised btnnew6 btn-xs  " (click)="filterdrbytab('My Candidates', 'callbackrequest')"
                                                      data-target="#candidatesall">Call back request
                                                  <span class="badge ng-binding">{{callbackrequest}}</span>
                                              </button>
                                              <button type="button" class="btn  btn-raised btnnew3  btn-xs" style="width:22%;" (click)="filterdrbytab('My Candidates', 'incompletecall','tocall')"
                                                      data-target="#candidatesall">To call/No Status
                                                  <span class="badge ng-binding">{{tocall}}/{{incompletecall}}</span>
                                              </button>
                                              <button type="button" class="btn  btn-raised btnnew4   btn-xs" (click)="filterdrbytab('My Candidates', 'couldnotconnect')"
                                                      data-target="#candidatesall">Could not connect
                                                  <span class="badge ng-binding">{{couldnotconnect}}</span>
                                              </button> -->

                <div style="text-align: right;">
                  <button type="button" class="btn  btn-raised btnnew btn-sm"
                    (click)="filterdrbytab('My Candidates', 'allcalled')" data-toggle="modal">All
                    <span class="badge ng-binding">{{allcalledcandidate}}</span>
                  </button>
                  <button type="button" class="btn  btn-raised btnnew1 btn-sm"
                    (click)="filterdrbytab('My Candidates', 'calledinterested')" data-toggle="modal">Interested
                    <span class="badge ng-binding">{{calledinterested}}</span>
                  </button>
                  <button type="button" class="btn  btn-raised btnnew2 btn-sm"
                    (click)="filterdrbytab('My Candidates', 'callednotinterested ')" data-toggle="modal">Not interested
                    <span class="badge ng-binding">{{callednotinterested}}</span>
                  </button>
                  <button type="button" class="btn  btn-raised btnnew5 btn-sm"
                    (click)="filterdrbytab('My Candidates', 'isinterview')" data-toggle="modal">Call back request
                    <span class="badge ng-binding">{{callbackrequest}}</span>
                  </button>
                  <button type="button" class="btn  btn-raised btnnew3 btn-sm"
                    (click)="filterdrbytab('My Candidates',  'incompletecall','tocall')" data-toggle="modal"> To call/No
                    Status
                    <span class="badge ng-binding">{{tocall}}/{{incompletecall}}}</span>
                  </button>
                  <button type="button" class="btn  btn-raised btnnew4 btn-sm"
                    (click)="filterdrbytab('My Candidates', 'couldnotconnect')" data-toggle="modal">Could not connect
                    <span class="badge ng-binding">{{couldnotconnect}}</span>
                  </button>
                </div>


              </div>
              <div class="col-md-12">



                <ag-grid-angular style="width: 100%; height: 500px;" class="ag-theme-material" [rowData]="rowData"
                  [columnDefs]="columnDefs" suppressCsvExport=false [suppressRowClickSelection]="true"
                  [groupSelectsChildren]="true" paginationAutoPageSize='true'
                  (selectionChanged)="onSelectionChanged($event)" [debug]="true" [rowSelection]="rowSelection"
                  [rowGroupPanelShow]="rowGroupPanelShow" [pivotPanelShow]="pivotPanelShow"
                  [enableRangeSelection]="true" [getRowHeight]='getRowHeight' [pagination]="true"
                  (gridReady)="onGridReady($event)" (rowdata)="bindrowdata($event)" (rowClicked)="onRowClicked($event)">
                </ag-grid-angular>
                <div class="clearfix clear"></div>
              </div>
              <div class="clearfix clear"></div>

            </div>

          </div>

        </div>
      </div>








      <div class="modal bs-example-modal-md" id="downloadtracker" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">

              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h3 class="center">Download Tracker
                <span ng-class='countRowsinMyJob > 10 ? "text-danger" : "text - success"'> (CV Selected :
                  {{countRowsinMyJob}})</span>
              </h3>
            </div>
            <div class="modal-body">
              <div class="form-horizontal" role="form">

                <div class="form-group">

                  <div class="col-lg-10">
                    <select class="form-control m" [(ngModel)]="trackerno" n="Tracker NO" validate>
                      <option value="{{tracker.id}}" *ngFor="let tracker of trackerlist">{{tracker.tracker_name}}
                      </option>
                    </select>


                  </div>

                </div>
                <button type="button" (click)="downloadtracker()" class="btn  btn-raised btn-primary btn-md">Download <i
                    class="fa fa-download"></i></button>

              </div>
            </div>

          </div>
        </div>

      </div>




    </div>

  </div>
</div>

<app-add-to-job></app-add-to-job>
<app-add-note [set_candidate_id]='candidate_id'></app-add-note>
<app-add-candidate></app-add-candidate>
<app-update-status [allstatusload]='allstatusload' [set_status_row]='status_row'></app-update-status>
<app-activity [activities]="activities"></app-activity>
